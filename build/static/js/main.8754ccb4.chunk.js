(this.webpackJsonpbackoffice=this.webpackJsonpbackoffice||[]).push([[0],{345:function(e,t){var a={schema:{type:"object",title:"Basic",properties:{object:{type:"object",title:"Object",properties:{}},text:{type:"string",title:"Text"},checkbox:{type:"boolean",title:"Checkbox"},checkboxes:{type:"array",title:"Check Boxes",items:{type:"string",enum:["option-1","option-2","option-3"]},uniqueItems:!0},list:{type:"array",title:"List",items:{type:"string"}},dropdown:{type:"string",title:"Dropdown",enum:["option-1","option-2","option-3"],enumNames:["Option 1","Option 2","Option 3"]},number:{type:"number",title:"Number"},textarea:{type:"string",title:"Text Area"},datetime:{type:"string",title:"Date Time"}}},uiSchema:{textarea:{"ui:widget":"textarea"},datetime:{"ui:widget":"datetime"},checkboxes:{"ui:widget":"checkboxes"}}};e.exports={schema:{type:"object",properties:{basic:a.schema}},uiSchema:{basic:a.uiSchema}}},353:function(e,t,a){},493:function(e,t){e.exports={leftSiderWidth:300,rightSiderWidth:360,formWidth:600,isInlineMode:!0,subViews:["schema","uiSchema","formData"]}},494:function(e,t){e.exports={categoryId:null,templateId:null,productId:null,categories:[]}},505:function(e,t,a){e.exports=a(854)},510:function(e,t,a){},527:function(e,t,a){},804:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},850:function(e,t,a){},854:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),c=a.n(i),o=(a(353),a(31)),l=a(29),u=a(33),s=a(32),d=a(222),m=a(65),p=(a(510),a(19)),h=a(42),f=a.n(h),v=a(63),y=a(131),g=a(454),b=a.n(g).a.create({baseURL:"https://infohebackend.herokuapp.com"}),E=(a(527),a(49)),O=a(192),j=(a(542),a(351)),k=a(78),S=a(874),C=a(46),T=a(875),_=a(872),w=a(876),N=function(e){var t=e.visibility,a=e.setVisibility,i=e.saveNewCategory,c=Object(n.useState)(""),o=Object(C.a)(c,2),l=o[0],u=o[1],s=Object(n.useState)(""),d=Object(C.a)(s,2),m=d[0],p=d[1];return r.a.createElement(T.a,{title:"Add Category Name",visible:t,onOk:function(e){var t=l,a=m;u(""),p(""),i(t,a)},onCancel:function(e){a(!1)},destroyOnClose:!0},r.a.createElement(_.a,{preserve:!1},r.a.createElement(w.a,{size:"large",placeholder:"Enter category",onChange:function(e){return u(e.target.value)},defaultValue:""}),r.a.createElement(w.a,{size:"large",placeholder:"Enter category",onChange:function(e){return p(e.target.value)},defaultValue:""})))},x=function(e){var t=e.visibility,a=e.setVisibility,n=e.deleteCategory;return r.a.createElement(T.a,{title:"Confirm to delete Category",visible:t,onOk:function(e){n(!0),a(!1)},onCancel:function(e){a(!1)}},r.a.createElement("p",null,"Are you sure you want to delete this Category?"))},I=function(e){var t=e.visibility,a=e.setVisibility,n=e.deleteTemplate;return r.a.createElement(T.a,{title:"Confirm to remove Template",visible:t,onOk:function(e){n(),a(!1)},onCancel:function(e){a(!1)}},r.a.createElement("p",null,"Are you sure you want to delete this Template?"))},D=function(e){var t=e.selectPrevMatch,a=e.selectNextMatch,n=e.searchParams,i=e.inputChange,c=n.searchFocusIndex,o=n.searchString,l=n.searchFoundCount;return r.a.createElement("form",{style:{display:"flex",width:"60%"},onSubmit:function(e){e.preventDefault()}},r.a.createElement(w.a,{id:"find-box",type:"text",placeholder:"Search...",value:o,onChange:i}),r.a.createElement("button",{type:"button",disabled:!l,onClick:t},"<"),r.a.createElement("button",{type:"submit",disabled:!l,onClick:a},">"),r.a.createElement("span",null,"\xa0",l>0?c+1:0,"\xa0/\xa0",l||0))},R=function(e){var t=e.onClick;return r.a.createElement(k.a,{type:"primary",onClick:t},"Add New Category")},A=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).deleteTemplate=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.deleteTemplate.node,e.next=3,b.delete("/templates/".concat(t.template_id));case 3:204===e.sent.status&&(j.a.success({message:"Template Deleted",description:"The template has been removed from the database!"}),(a=n.state.categories).forEach((function(e){e._id===t._id&&(e.template_id=null)})),n.setState({categories:a}));case 5:case"end":return e.stop()}}),e)}))),n.deleteTemplateModalVisibility=function(e,t,a){var r=n.state.deleteTemplate;r={ModalVisiblity:e,node:t,path:a},n.setState({deleteTemplate:r})},n.state={searchString:"",searchFocusIndex:0,searchFoundCount:null,categories:[],newCategory:{ModalVisiblity:!1,name:"",node:null,path:null},deleteCategory:{ModalVisiblity:!1,node:null,path:null},deleteTemplate:{ModalVisiblity:!1,node:null,path:null}},n.saveToBackend=n.saveToBackend.bind(Object(y.a)(n)),n.newModalVisibility=n.newModalVisibility.bind(Object(y.a)(n)),n.saveNewCategory=n.saveNewCategory.bind(Object(y.a)(n)),n.deleteFromBackend=n.deleteFromBackend.bind(Object(y.a)(n)),n.deleteModalVisibility=n.deleteModalVisibility.bind(Object(y.a)(n)),n.deleteCategory=n.deleteCategory.bind(Object(y.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r,i,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){return e.parent_id},i=function(e){return e._id},e.next=4,b.get("/categories");case 4:t=e.sent,a=t.data,n=a,r=0;case 8:if(!(r<n.length)){e.next=17;break}if(null!==n[r]){e.next=13;break}return n.splice(r,1),r--,e.abrupt("continue",14);case 13:n[r].title=n[r].name;case 14:r++,e.next=8;break;case 17:o=Object(O.c)({flatData:n,getKey:i,getParentKey:c,rootKey:null}),n=o,this.setState({categories:n}),this.props.setOptions({options:n});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFromBackend",value:function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.delete("/categories/"+t);case 2:204===e.sent.status&&j.a.success({message:"Category Deleted",description:"The category has been deleted from the database!"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveToBackend",value:function(e){var t=this.state.newCategory;return this.setState({newCategory:t}),b.post("/categories",Object(p.a)(Object(p.a)({},e),{},{name:e.title})).then((function(e){return 201===e.status&&(j.a.success({message:"New Category Saved",description:"The new category has been added to the database!"}),!0)})).catch((function(e){return!1}))}},{key:"newModalVisibility",value:function(e,t,a){var n=this.state.newCategory;n.ModalVisiblity=e,t&&(n.node=t),a&&(n.path=a),this.setState({newCategory:n})}},{key:"saveNewCategory",value:function(){var e=Object(v.a)(f.a.mark((function e(t,a){var n,r,i,c,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return e.treeIndex},r=this.state.newCategory,i=r.node,c=r.path,o=t){e.next=5;break}return e.abrupt("return");case 5:return l={title:o,image:a,hello:"hello",parent_id:i?i._id:null,path:i?i.path+"/"+o:o},e.next=8,this.saveToBackend(l);case 8:if(e.sent){e.next=11;break}return e.abrupt("return",j.a.error({message:"An Error Occurred",description:"The new category was not added to the database!"}));case 11:null===i?this.setState((function(e){return{categories:e.categories.concat(l)}})):this.setState((function(e){return{categories:Object(O.a)({treeData:e.categories,parentKey:c[c.length-1],expandParent:!0,getNodeKey:n,newNode:l,addAsFirstChild:e.addAsFirstChild}).treeData}})),r.ModalVisiblity=!1,r.node=null,r.path=null,this.setState({newCategory:r});case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteModalVisibility",value:function(e,t,a){var n=this.state.deleteCategory;n.ModalVisiblity=e,t&&(n.node=t),a&&(n.path=a),this.setState({deleteCategory:n})}},{key:"deleteCategory",value:function(e){var t=function(e){return e.treeIndex},a=this.state.deleteCategory,n=a.node,r=a.path;this.setState((function(e){return{categories:Object(O.d)({treeData:e.categories,path:r,getNodeKey:t})}})),this.deleteFromBackend(n._id)}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchString,n=t.searchFocusIndex,i=t.searchFoundCount;return r.a.createElement("div",{className:"Categories"},r.a.createElement("h3",null,"List of Categories"),r.a.createElement(D,{searchParams:{searchString:a,searchFocusIndex:n,searchFoundCount:i},selectPrevMatch:function(){return e.setState({searchFocusIndex:null!==n?(i+n-1)%i:i-1})},selectNextMatch:function(){return e.setState({searchFocusIndex:null!==n?(n+1)%i:0})},inputChange:function(t){return e.setState({searchString:t.target.value})}}),r.a.createElement(R,{onClick:function(){return e.newModalVisibility(!0,null,null)}}),this.state.categories.length?r.a.createElement(O.b,{canDrag:!1,treeData:this.state.categories,onChange:function(t){return e.setState({categories:t})},generateNodeProps:function(t){var a=t.node,n=t.path;return{buttons:[r.a.createElement(k.a,{onClick:Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.newModalVisibility(!0,a,n);case 1:case"end":return t.stop()}}),t)})))},"Add Child"),a.children||null!=a.template_id?null:r.a.createElement(k.a,{onClick:function(t){e.deleteModalVisibility(!0,a,n)}},"Remove"),a.template_id?[r.a.createElement(k.a,{key:"edit-".concat(a._id),href:"/template?category=".concat(a._id,"&template=").concat(a.template_id)},"View/Edit Template"),0===a.products&&null!==a.template_id?r.a.createElement(k.a,{key:"remove-".concat(a._id),onClick:function(){var t=Object(v.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.deleteTemplateModalVisibility(!0,a,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Remove Template"):r.a.createElement(k.a,{key:"editprod-".concat(a._id),href:"/product?category=".concat(a._id)},"View/Edit Product"),r.a.createElement(k.a,{key:"addprod-".concat(a._id),href:"/addproduct?category=".concat(a._id,"&template=").concat(a.template_id)},"Add Product")]:r.a.createElement(k.a,{href:"/template?category=".concat(a._id)},"Add Template")]}},searchMethod:function(e){var t=e.node,a=e.searchQuery;return a&&t.title.toLowerCase().indexOf(a.toLowerCase())>-1},onlyExpandSearchedNodes:!0,searchQuery:a,searchFocusOffset:n,searchFinishCallback:function(t){return e.setState({searchFoundCount:t.length,searchFocusIndex:t.length>0?n%t.length:0})}}):r.a.createElement(S.a,{active:!0}),r.a.createElement(N,{visibility:this.state.newCategory.ModalVisiblity,setVisibility:this.newModalVisibility,saveNewCategory:this.saveNewCategory}),r.a.createElement(x,{visibility:this.state.deleteCategory.ModalVisiblity,setVisibility:this.deleteModalVisibility,deleteCategory:this.deleteCategory}),r.a.createElement(I,{visibility:this.state.deleteTemplate.ModalVisiblity,setVisibility:this.deleteTemplateModalVisibility,deleteTemplate:this.deleteTemplate}))}}]),a}(n.Component),F=Object(E.b)((function(e){return{options:e.options}}),(function(e){return{setOptions:function(t){var a=t.options;return e({type:"SET_OPTIONS",payload:a})}}}))(A),M=a(871),P=a(500),V=a(878),W=a(103),U=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderMultiSelect",value:function(){var e=this.props,t=e.schema,a=e.idSchema,n=e.uiSchema,i=e.formData,c=e.disabled,o=e.readonly,l=e.autofocus,u=e.onBlur,s=e.onFocus,d=e.registry,m=void 0===d?G():d,h=e.rawErrors,f=this.props.formData,v=m.widgets,y=m.definitions,g=m.formContext,b=Object(Y.B)(t.items,y,i),E=Object(Y.w)(b),O=Object(p.a)(Object(p.a)({},Object(Y.l)(n)),{},{enumOptions:E}),j=O.widget,k=void 0===j?"select":j,S=Object(W.a)(O,["widget"]),C=H(t,k,v);return r.a.createElement(C,{id:a&&a.$id,multiple:!0,onChange:this.onSelectChange,onBlur:u,onFocus:s,options:S,schema:t,value:f,disabled:c,readonly:o,formContext:g,autofocus:l,rawErrors:h})}}]),a}(a(269).a);a(126);function B(e){var t,a=e.schema,n=e.name,i=e.uiSchema,c=e.idSchema,o=e.formData,l=e.registry,u=void 0===l?G():l,s=e.required,d=e.disabled,m=e.readonly,h=e.autofocus,f=e.onChange,v=e.onFocus,y=e.onBlur,g=e.rawErrors,b=a.title,E=u.widgets,O=u.formContext,j=u.fields,k=Object(Y.l)(i),S=k.widget,C=void 0===S?"checkbox":S,T=Object(W.a)(k,["widget"]),_=H(a,C,E);return t=Array.isArray(a.oneOf)?Object(Y.w)({oneOf:a.oneOf.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{title:e.title||(!0===e.const?"Yes":"No")})}))}):Object(Y.w)({enum:a.enum||[!0,!1],enumNames:a.enumNames||(a.enum&&!1===a.enum[0]?["No","Yes"]:["Yes","No"])}),r.a.createElement(_,{options:Object(p.a)(Object(p.a)({},T),{},{enumOptions:t}),schema:a,id:c&&c.$id,onChange:f,onFocus:v,onBlur:y,label:void 0===b?n:b,value:o,required:s,disabled:d,readonly:m,registry:u,formContext:O,autofocus:h,rawErrors:g,DescriptionField:j.DescriptionField})}B.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};var K=B;function L(e){var t=e.schema,a=e.name,n=e.uiSchema,i=e.idSchema,c=e.formData,o=e.required,l=e.disabled,u=e.readonly,s=e.autofocus,d=e.onChange,m=e.onBlur,h=e.onFocus,f=e.registry,v=void 0===f?G():f,y=e.rawErrors,g=t.title,b=t.format,E=v.widgets,O=v.formContext,j=Object(Y.t)(t)&&Object(Y.w)(t),k=j?"select":"text";b&&Object(Y.o)(t,b,E)&&(k=b);var S=Object(Y.l)(n),C=S.widget,T=void 0===C?k:C,_=S.placeholder,w=void 0===_?"":_,N=Object(W.a)(S,["widget","placeholder"]),x=H(t,T,E);return r.a.createElement(x,{options:Object(p.a)(Object(p.a)({},N),{},{enumOptions:j}),schema:t,id:i&&i.$id,label:void 0===g?a:g,value:c,onChange:d,onBlur:m,onFocus:h,required:o,disabled:l,readonly:u,formContext:O,autofocus:s,registry:v,placeholder:w,rawErrors:y})}L.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};var q=L,J=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidCatch",value:function(e,t){j.a.error({message:"Error: ".concat(this.props.idSchema.$id),description:e.toString(),duration:0})}}]),a}(a(270).a),Y=a(8);function z(e){return function(){return r.a.createElement(V.a,{message:e,type:"error",showIcon:!0})}}function H(){try{return Y.m.apply(void 0,arguments)}catch(e){return z(e.toString())}}function $(e){var t=e.id,a=e.title,n=e.required;return r.a.createElement("legend",{id:t},a,n?"*":null)}function G(){return{fields:Object(p.a)(Object(p.a)({},a(450).default),{},{ArrayField:U,StringField:q,BooleanField:K,TitleField:$,SchemaField:J}),widgets:a(448).default,definitions:{},formContext:{}}}var Q=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"getRegistry",value:function(){var e=G(),t=e.fields,a=e.widgets;return{fields:Object(p.a)(Object(p.a)({},t),this.props.fields),widgets:Object(p.a)(Object(p.a)({},a),this.props.widgets),ArrayFieldTemplate:this.props.ArrayFieldTemplate,ObjectFieldTemplate:this.props.ObjectFieldTemplate,FieldTemplate:this.props.FieldTemplate,definitions:this.props.schema.definitions||{},formContext:this.props.formContext||{},onSubmit:this.props.onSubmit}}}]),a}(P.a);function Z(e){var t=e.label,a=e.required,n=e.id;return t?r.a.createElement("label",{className:"control-label",htmlFor:n},t,a&&r.a.createElement("span",{className:"required"},"*")):r.a.createElement("div",null)}var X=a(885),ee=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState({value:e.target.value})},n.onCompleteEditing=function(){n.setState({editing:!1});var e=n.state.value.trim();e!==n.props.value&&n.props.onChange&&n.props.onChange(e)},n.onStartEditing=function(e){e.stopPropagation(),e.preventDefault(),n.setState({editing:!0},(function(){return n.input&&n.input.focus()}))},n.onCancelEditing=function(){n.setState({editing:!1,value:n.props.value})},n.state={editing:!1,value:n.props.value},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"renderEditing",value:function(){var e=this;return r.a.createElement(w.a,{ref:function(t){return e.input=t},value:this.state.value,onBlur:this.onCompleteEditing,onChange:this.onChange,onKeyUp:function(t){t.preventDefault(),t.stopPropagation(),13===t.keyCode?e.onCompleteEditing():27===t.keyCode&&e.onCancelEditing()}})}},{key:"renderView",value:function(){return r.a.createElement("span",null,this.props.children,r.a.createElement(X.a,{onClick:this.onStartEditing}))}},{key:"render",value:function(){return this.state.editing?this.renderEditing():this.renderView()}}]),a}(n.Component),te=a(124),ae=a(881),ne=a(886),re=a(887),ie=a(89).getNodeByRjsfId,ce=w.a.TextArea,oe={backgroundColor:"#bae7ff"},le=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderView",value:function(){return r.a.createElement("span",{className:"fb-test",onClick:this.onStartEditing},this.props.children)}}]),a}(ee),ue=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderEditing",value:function(){var e=this;return r.a.createElement(ce,{ref:function(t){return e.input=t},value:this.state.value,onBlur:this.onCompleteEditing,onChange:this.onChange,autoSize:!0,onKeyUp:function(t){27===t.keyCode&&e.onCancelEditing()}})}}]),a}(le),se=Object(E.b)(null,(function(e,t){var a=t.id;return{select:function(){return e({type:"ACTIVE_NODE_KEY_SET_BY_RJSF_ID",payload:a})},remove:function(){return e({type:"TREE_REMOVE_NODE_BY_RJSF_ID",payload:a})}}}))((function(e){var t=e.select,a=e.remove,n=e.id;return r.a.createElement(te.a,{title:n,placement:"right"},r.a.createElement("a",{href:"#!"},r.a.createElement(ne.a,{onClick:t})),r.a.createElement(ae.a,{title:"Remove ".concat(n,"?"),onConfirm:a},r.a.createElement("a",{href:"#!"},r.a.createElement(re.a,null))))}));var de,me,pe=(de=function(e){var t=e.id,a=e.classNames,n=e.label,i=e.children,c=e.errors,o=e.help,l=e.description,u=e.hidden,s=e.required,d=e.displayLabel;return u?i:r.a.createElement("div",{className:a},d&&r.a.createElement(Z,{label:n,required:s,id:t}),d&&l?l:null,i,c,o)},Object(E.b)((function(e,t){var a=e.tree.present,n=e.activeNodeKey,r=e.settings.isInlineMode,i=t.id,c=ie(a,i);return{tree:a,active:c&&c.key===n,isInlineMode:r}}),(function(e,t){var a=t.id,n=t.schema,r=t.uiSchema;return{updateTitle:function(t){return e({type:"TREE_UPDATE_NODE_BY_RJSF_ID",payload:{rjsfId:a,nodeUpdate:{schema:Object(p.a)(Object(p.a)({},n),{},{title:t})}}})},updateDescription:function(t){return e({type:"TREE_UPDATE_NODE_BY_RJSF_ID",payload:{rjsfId:a,nodeUpdate:{schema:Object(p.a)(Object(p.a)({},n),{},{description:t})}}})},updateHelp:function(t){return e({type:"TREE_UPDATE_NODE_BY_RJSF_ID",payload:{rjsfId:a,nodeUpdate:{uiSchema:Object(p.a)(Object(p.a)({},r),{},{"ui:help":t})}}})}}}))((function(e){var t=e.id,a=e.label,n=e.description,i=e.help,c=e.schema,o=e.updateTitle,l=e.updateDescription,u=e.updateHelp,s=e.active,d=e.classNames;if(!e.isInlineMode)return r.a.createElement(de,e);var m=a&&r.a.createElement(le,{value:a,onChange:o},a),p=n&&r.a.createElement(ue,{value:n.props.description,onChange:l},n),h=i&&r.a.createElement(le,{value:i.props.help,onChange:u},i);return r.a.createElement("div",{className:d,style:s?oe:null},["object","array"].includes(c.type)?null:r.a.createElement("div",{className:"pull-right"}," ",r.a.createElement(se,{id:t})," "),r.a.createElement(de,Object.assign({_label:a,_description:n,_help:i},e,{classNames:null,label:m,description:p,help:h})))}))),he=(me=function(e){var t=e.TitleField,a=e.DescriptionField;return r.a.createElement("fieldset",null,(e.uiSchema["ui:title"]||e.title)&&r.a.createElement(t,{id:"".concat(e.idSchema.$id,"__title"),title:e.title||e.uiSchema["ui:title"],required:e.required,formContext:e.formContext}),e.description&&r.a.createElement(a,{id:"".concat(e.idSchema.$id,"__description"),description:e.description,formContext:e.formContext}),e.properties.map((function(e){return e.content})))},Object(E.b)((function(e,t){var a=e.tree.present,n=e.activeNodeKey,r=e.settings.isInlineMode,i=t.idSchema,c=i&&i.$id&&ie(a,i.$id);return{tree:a,active:c&&c.key===n,isInlineMode:r}}),(function(e,t){var a=t.idSchema,n=t.schema;return{updateTitle:function(t){return e({type:"TREE_UPDATE_NODE_BY_RJSF_ID",payload:{rjsfId:a.$id,nodeUpdate:{schema:Object(p.a)(Object(p.a)({},n),{},{title:t})}}})},updateDescription:function(t){return e({type:"TREE_UPDATE_NODE_BY_RJSF_ID",payload:{rjsfId:a.$id,nodeUpdate:{schema:Object(p.a)(Object(p.a)({},n),{},{description:t})}}})}}}))((function(e){var t=e.idSchema,a=e.title,n=e.description,i=e.updateTitle,c=e.updateDescription,o=e.active;if(!e.isInlineMode)return r.a.createElement(me,e);var l=a&&r.a.createElement("span",null,r.a.createElement(le,{value:a,onChange:i},a),r.a.createElement("span",{className:"pull-right"}," ",r.a.createElement(se,{id:t.$id})," ")),u=n&&r.a.createElement(ue,{value:n,onChange:c},n);return r.a.createElement("div",{style:o?oe:null},r.a.createElement(me,Object.assign({_title:a,_description:n},e,{title:l,description:u})))}))),fe=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){if(!this.props.schema)return null;var e=this.props,t=e.name,a=e.schema,n=e.uiSchema,i=e.formData,c=e.setFormData,o=e.liveValidate,l=e.onSubmit;return r.a.createElement(Q,{schema:a,uiSchema:n,formData:i,liveValidate:o,FieldTemplate:pe,ObjectFieldTemplate:he,idPrefix:t,onChange:c,onSubmit:l})}}]),a}(r.a.Component),ve=Object(E.b)((function(e){var t=Object(C.a)(e.tree.present,1)[0];return{name:t.name,schema:t.schema,uiSchema:t.uiSchema,formData:e.formData,liveValidate:e.settings.isLiveValidate}}),(function(e){return{setFormData:function(t){var a=t.formData;return e({type:"FORM_DATA_SET",payload:a})}}}))(fe),ye=w.a.TextArea;var ge=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.target.value;try{var a=t?JSON.parse(t):null;n.setState({value:a,string:t,error:null},(function(){return n.props.onChange(a)}))}catch(r){n.setState({string:t,error:r})}},n.onClickPrettify=function(){n.state.error||n.setState({string:JSON.stringify(n.props.value,null,2)})};var r=e.value;return n.state={string:JSON.stringify(r,null,2),value:r},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){(function(e,t){if(e===t)return!0;if(!e||!t)return!1;var a;for(a in e)if(e.hasOwnProperty(a)&&(!t.hasOwnProperty(a)||e[a]!==t[a]))return!1;for(a in t)if(t.hasOwnProperty(a)&&!e.hasOwnProperty(a))return!1;return!0})(e.value,this.state.value)||this.setState({value:e.value,string:JSON.stringify(e.value,null,2),error:null})}},{key:"shouldComponentUpdate",value:function(e,t){return t.string!==this.state.string}},{key:"renderErrorMessage",value:function(){var e=this,t=this.state.error;if(!t)return null;var a=t.toString(),n=r.a.createElement("a",{href:"#!",onClick:function(){var t=/position ([0-9]+)/.exec(a),n=t?t[1]:-1,r=e.input.textAreaRef;r.selectionStart=n,r.selectionEnd=n,r.focus()}},t.toString());return r.a.createElement(V.a,{message:n,type:"error",showIcon:!0})}},{key:"render",value:function(){var e=this,t=this.state.string;return r.a.createElement("div",null,this.renderErrorMessage()||r.a.createElement(V.a,{message:r.a.createElement("a",{href:"#!",onClick:this.onClickPrettify},"Prettify"),type:"success",showIcon:!0}),r.a.createElement(ye,Object.assign({},this.props,{ref:function(t){return e.input=t},value:t,onChange:this.onChange})))}}]),a}(r.a.Component);Object(E.b)((function(e){return{schema:Object(C.a)(e.tree.present,1)[0].schema}}),(function(e){return{setTree:function(t){return e({type:"TREE_SET_TREE",payload:{schema:t}})}}}))((function(e){var t=e.schema,a=e.setTree;return r.a.createElement(ge,{value:t,onChange:function(e){return a(e)},autoSize:!0})})),Object(E.b)((function(e){return{uiSchema:Object(C.a)(e.tree.present,1)[0].uiSchema}}),(function(e){return{setTree:function(t){return e({type:"TREE_SET_TREE",payload:{uiSchema:t}})}}}))((function(e){var t=e.uiSchema,a=e.setTree;return r.a.createElement(ge,{value:t,onChange:function(e){return a(e)},autoSize:!0})}));function be(e,t){var a=t?function(e){return e?(e.indexOf("_")>=0?e.split("_"):e.split(/(?=[A-Z])/)).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "):e}(t):void 0;if("number"===typeof e)return{type:Number.isInteger(e)?"integer":"number",title:a};if("string"===typeof e)return{type:"string",title:a};if("boolean"===typeof e)return{type:"boolean",title:a};if("object"===typeof e){if(Array.isArray(e))return{type:"array",title:a,items:be(e[0])};var n={};for(var r in e){var i=be(e[r],r);i&&(n[r]=i)}return{type:"object",title:a,properties:n}}}Object(E.b)((function(e){return{formData:e.formData}}),(function(e){return{setFormData:function(t){return e({type:"FORM_DATA_SET",payload:t})},genForm:function(t){return e({type:"TREE_SET_TREE",payload:{name:"root",schema:be(t,"form"),uiSchema:{}}})}}}))((function(e){var t=e.formData,a=e.setFormData,n=e.genForm;return r.a.createElement("div",null,r.a.createElement(ge,{value:t,onChange:function(e){return a(e)},autoSize:!0}),r.a.createElement(k.a,{type:"primary",onClick:function(){return n(t)}},"Gen Form"),r.a.createElement(k.a,{onClick:function(){return a({})}},"Clear"))})),a(804);var Ee=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).submitHandler=Object(v.a)(f.a.mark((function e(){var t,a,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"",a=n.props.formData,t="".concat(a.name),r={template_id:n.state.templateId,category_id:n.state.categoryId,data:JSON.stringify(a),name:t},null===n.state.productId){e.next=11;break}return r.id=n.state.productId,e.next=8,b.patch("/product",r);case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,b.post("/product",r);case 13:i=e.sent;case 14:201===i.status||200===i.status?(j.a.success({message:"Product Added",description:"The product has been added to the database!"}),n.props.setFormData({formData:{}})):j.a.error({message:"An Error Occurred",description:"The product was not saved to the database. Please try again later."}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),j.a.error({message:"An Error Occurred",description:"The product was not saved to the database. Please try again later."});case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),n.state={formData:{},schema:{},templateId:null,categoryId:null,productId:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r,i,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(this.props.location.search),a=t.get("template"),n=t.get("category"),r=t.get("product"),i={},null!==r&&(this.setState({productId:r}),i={name:{"ui:readonly":!0},image:{"ui:readonly":!0}}),e.next=6,b.get("/templates/"+a);case 6:c=e.sent,o=c.data,"null"===n&&(n=o.category_id),this.props.updateSettings({isInlineMode:!1}),this.props.setTree({schema:JSON.parse(o.formSchema),uiSchema:i}),this.setState({schema:JSON.parse(o.formSchema),templateId:a,categoryId:n});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"product"},r.a.createElement("h4",null,"Form Page"),r.a.createElement("h5",null,this.state.productId?"Edit Product":"Add New Product"),r.a.createElement(M.a,{variant:"elevation",raised:!0,className:"card"},r.a.createElement(ve,{formData:this.props.formData,schema:this.props.schema,onSubmit:this.submitHandler})))}}]),a}(n.Component),Oe=Object(E.b)((function(e){var t=e.settings,a=e.formData;return{settings:t,schema:Object(C.a)(e.tree.present,1)[0].schema,formData:a}}),(function(e){return{setTree:function(t){var a=t.schema,n=t.uiSchema;return e({type:"TREE_SET_TREE",payload:{schema:a,uiSchema:n}})},setFormData:function(t){var a=t.formData;return e({type:"FORM_DATA_SET",payload:a})},updateSettings:function(t){return e({type:"SETTINGS_UPDATE",payload:t})}}}))(Ee),je=(a(805),a(869)),ke=a(348),Se=a(880),Ce=a(69),Te=a(104),_e=a(877),we=a(888),Ne=a(889),xe=a(279),Ie=a(164),De=Ie.a.SubMenu,Re=Ie.a.Item;function Ae(e,t){for(var a=1,n=e;t&&t.includes(n);)n=e+"_"+a,a+=1;return n}var Fe=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onAddNode=function(t){var a=e.props.addNode,n=Ae(t.name,e.props.node.children.map((function(e){return e.name})));console.log(t),a(Object(p.a)(Object(p.a)({},t),{},{name:n}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.menu.children,n=t.menuOpenKeys,i=t.menuOpenChange;return r.a.createElement(Ie.a,{mode:"inline",theme:"dark",openKeys:n,onOpenChange:i},a.map((function(t){return t.schema&&"object"===t.schema.type&&t.children&&t.children.length?r.a.createElement(De,{key:t.key,title:t.schema.title||t.name},t.children.map((function(t){return r.a.createElement(Re,{key:t.key,onClick:function(){return e.onAddNode(t)}},t.schema.title||t.name)}))):r.a.createElement(Re,{key:t.key,onClick:function(){return e.onAddNode(t)}},t.schema.title||t.name)})))}}]),a}(r.a.Component),Me=Object(E.b)((function(e){return{menu:e.menu,menuOpenKeys:e.menuOpenKeys}}),(function(e,t){var a=t.node;return{addNode:function(t){return e({type:"TREE_ADD_NODE",payload:{targetNodeKey:a.key,position:0,node2add:t}})},menuOpenChange:function(t){return e({type:"MENU_OPEN_KEYS_SET",payload:t})}}}))(Fe),Pe=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.node,a=e.removeNode,n=e.updateNodeName,i=e.searchValue,c=t.name,o=t.key,l=t.isLeaf,u=t.name===t.key,s="array"===t.schema.type,d=t.name.toLowerCase().indexOf(i),m=d+i.length;return r.a.createElement("span",{style:{display:"block"}},i&&d>=0?r.a.createElement(ee,{value:t.name,onChange:function(e){return n(o,e)}},c.slice(0,d),r.a.createElement("span",{style:{color:"#f50"}},c.slice(d,m)),c.slice(m)):r.a.createElement(ee,{value:t.name,onChange:function(e){return n(o,e)}},c),r.a.createElement("span",{className:"pull-right"},l||s?null:r.a.createElement("span",{className:"form-builder-add-item-menu",onClick:function(e){return e.stopPropagation()}},r.a.createElement(xe.a,{placement:"bottomLeft",trigger:["click"],overlay:r.a.createElement(Me,{node:t})},r.a.createElement(we.a,null))),u?null:r.a.createElement("span",{className:"tree-node-delete",onClick:function(e){return e.stopPropagation()}},r.a.createElement(ae.a,{placement:"rightTop",title:'Delete "'.concat(o,'"?'),onConfirm:function(){var e=t.key.split(".")[1];if("name"===e||"image"===e)return j.a.error({message:"Cannot delete basic fields!",description:"You cannot delete the basic fields required for templates."});a(o)},okText:"Yes",cancelText:"No"},r.a.createElement(Ne.a,null)))))}}]),a}(n.PureComponent),Ve=Object(E.b)(null,(function(e){return{removeNode:function(t){return e({type:"TREE_REMOVE_NODE",payload:t})},updateNodeName:function(t,a){return e({type:"TREE_UPDATE_NODE",payload:{target:t,nodeUpdate:{name:a}}})}}}))(Pe),We=_e.a.TreeNode,Ue=w.a.Search,Be=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onDrop=function(e){var t=e.node.props.eventKey,a=e.dragNode.props.eventKey,r=e.node.props.pos.split("-"),i=e.dropPosition-Number(r[r.length-1]);n.props.moveNode(a,t,i)},n.onExpand=function(e){n.setState({expandedKeys:e})},n.onChange=function(e){var t=n.state.expandedKeys,a=e.target.value.trim().toLowerCase();if(a){var r=[];!function e(n){if(n){var i,c=Object(Te.a)(n);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(o.name.toLowerCase().includes(a))for(var l=o.key.split("."),u=l.length,s=1;s<u;s++)t.includes(l[s-1])||r.includes(l[s-1])||r.push(l[s-1]),l[s]=l[s-1]+"."+l[s];e(o.children)}}catch(d){c.e(d)}finally{c.f()}}}(n.props.tree),n.setState({searchValue:a,searchExpanded:r})}else n.setState({searchValue:a,searchExpanded:[]})},n.onBlur=function(){n.setState({expandedKeys:[].concat(Object(Ce.a)(n.state.expandedKeys),Object(Ce.a)(n.state.searchExpanded)),searchExpanded:[]})},n.state={expandedKeys:["root"],searchValue:"",searchExpanded:[]},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(e.activeNodeKey&&e.activeNodeKey!==this.props.activeNodeKey){for(var t=e.activeNodeKey.split("."),a=Object(Ce.a)(this.state.expandedKeys),n=t.length,r=1;r<n;r++)t[r]=t[r-1]+"."+t[r],a.includes(t[r-1])||a.push(t[r-1]);this.setState({expandedKeys:a})}}},{key:"render",value:function(){var e=this.props,t=e.tree,a=e.setActiveNode,n=e.activeNodeKey,i=this.state,c=i.searchValue,o=i.expandedKeys,l=i.searchExpanded,u=function e(t){return t.map((function(t){return t.children&&t.children.length?r.a.createElement(We,{key:t.key,title:r.a.createElement(Ve,{node:t,searchValue:c}),isLeaf:t.isLeaf},e(t.children)):r.a.createElement(We,{key:t.key,title:r.a.createElement(Ve,{node:t,searchValue:c}),isLeaf:t.isLeaf})}))}(t);return r.a.createElement("div",null,r.a.createElement(Ue,{placeholder:"Search",onChange:this.onChange,onBlur:this.onBlur}),r.a.createElement(_e.a,{className:"form-builder-draggable-tree",expandedKeys:l.length?[].concat(Object(Ce.a)(o),Object(Ce.a)(l)):o,selectedKeys:[n],draggable:!0,onDragEnter:this.onDragEnter,onDrop:this.onDrop,onExpand:this.onExpand,onSelect:function(e){var t=Object(C.a)(e,1)[0];return a(t)},blockNode:!0},u))}}]),a}(n.Component),Ke=Object(E.b)((function(e){return{tree:e.tree.present,activeNodeKey:e.activeNodeKey}}),(function(e){return{moveNode:function(t,a,n){return e({type:"TREE_MOVE_NODE",payload:{source:t,target:a,position:n}})},removeNode:function(t){return e({type:"TREE_REMOVE_NODE",payload:t})},setActiveNode:function(t){return e({type:"ACTIVE_NODE_KEY_SET",payload:t})},updateNodeTitle:function(t,a){return e({type:"TREE_UPDATE_NODE",payload:{target:t,node:{name:a},updateMode:1}})}}}))(Be),Le=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var r=e.schema,i=e.uiSchema;return n.state={schemaJsonString:JSON.stringify(r,null,2),uiSchemaJsonString:JSON.stringify(r,null,2),schema:r,uiSchema:i},n}return Object(l.a)(a,null,[{key:"filter",value:function(e){return!0}},{key:"key",get:function(){return"json-editor"}},{key:"name",get:function(){return"Json"}}]),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.node,a=e.updateNode,n=t.schema,i=t.uiSchema,c=(n.properties,n.items,n.additionalItems,Object(W.a)(n,["properties","items","additionalItems"]));return r.a.createElement("div",null,r.a.createElement(w.a,{value:t.name,onChange:function(e){return a({name:e.target.value})}}),r.a.createElement(ge,{value:c,onChange:function(e){return a({schema:e})},autoSize:!0}),r.a.createElement(ge,{value:i,onChange:function(e){return a({uiSchema:e})},autoSize:!0}))}}]),a}(r.a.Component),qe=a(50),Je=a(220),Ye=a(193),ze=a(118),He=a(882),$e=a(879),Ge=a(873),Qe=a(883),Ze=a(890),Xe=a(891),et=a(892),tt=a(343),at=a.n(tt),nt=w.a.TextArea,rt=Je.a.Option;function it(e){var t=e.title,a=e.children,n=e.remove;return r.a.createElement(He.b.Item,{actions:n?[r.a.createElement(k.a,{onClick:n,size:"small",type:"danger",shape:"circle",icon:r.a.createElement(Ze.a,null)})]:null},r.a.createElement(He.b.Item.Meta,{title:t,description:a}))}var ct=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).throttle=1e3,n.editing=r.a.createElement(X.a,null),n.onChange=function(e){n.state.timer&&clearTimeout(n.state.timer),n.setState({value:e,timer:setTimeout((function(){n.setState({timer:null}),n.onSubmitValue(n.state.value)}),n.throttle)})},n.onBlur=function(){n.state.timer&&clearTimeout(n.state.timer),n.setState({timer:null}),n.onSubmitValue(n.state.value)},n.onRemove=function(){n.state.timer&&clearTimeout(n.state.timer),n.setState({timer:null}),n.onSubmitValue(void 0)},n.state={timer:null,value:e.value},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.state.timer&&(clearTimeout(this.state.timer),this.setState({timer:null}),this.onSubmitValue(this.state.value))}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.state.value&&(this.state.timer&&clearTimeout(this.state.timer),this.setState({value:e.value,timer:null}))}},{key:"onSubmitValue",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){return null}}]),a}(r.a.Component),ot=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=Object(W.a)(t,["title"]);return r.a.createElement(it,{title:r.a.createElement("span",null,a,this.state.timer?this.editing:null),remove:this.onRemove},r.a.createElement(w.a,Object.assign({},n,{value:this.state.value,onChange:function(t){return e.onChange(t.target.value)},onBlur:this.onBlur})))}}]),a}(ct),lt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=Object(W.a)(t,["title"]),i=r.a.createElement("span",null,a,this.state.timer?this.editing:null);return r.a.createElement(it,{title:i,remove:this.onRemove},r.a.createElement(nt,Object.assign({},n,{value:this.state.value,onChange:function(t){return e.onChange(t.target.value)},onBlur:this.onBlur})))}}]),a}(ct),ut=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.value[0]===this.state.value[0]&&e.value[1]===this.state.value[1]||(this.state.timer&&clearTimeout(this.state.timer),this.setState({value:e.value,timer:null}))}},{key:"onSubmitValue",value:function(e){e||this.props.onChange(e);var t=Object(C.a)(e,2),a=t[0],n=t[1];"string"===typeof a&&(a=a?this.props.value[0]:void 0),"string"===typeof n&&(n=n?this.props.value[1]:void 0),this.props.onChange([a,n])}},{key:"render",value:function(){var e=this,t=this.state,a=Object(C.a)(t.value,2),n=a[0],i=a[1],c=t.timer,o=this.props.title,l=r.a.createElement("span",null,o,c?this.editing:null);return r.a.createElement(it,{title:l,remove:this.onRemove},r.a.createElement($e.a,{onChange:function(t){e.onChange(["string"!==typeof t||t?t:void 0,i])},value:0===n&&void 0===i?"":n,style:{width:100,textAlign:"center"},placeholder:"Minimum"}),r.a.createElement(w.a,{style:{width:30,borderLeft:0,pointerEvents:"none",backgroundColor:"#fff"},placeholder:"~",disabled:!0}),r.a.createElement($e.a,{onChange:function(t){e.onChange([n,"string"!==typeof t||t?t:void 0])},value:i,style:{width:100,textAlign:"center",borderLeft:0},placeholder:"Maximum"}))}}]),a}(ct),st=at()({boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget"}}).toPairs().flatMap((function(e){var t=Object(C.a)(e,2),a=t[0],n=t[1];return at()(n).toPairs().map((function(e){return[Object(C.a)(e,1)[0],a]})).value()})).groupBy("0").toPairs().map((function(e){var t=Object(C.a)(e,2);return[t[0],t[1].map((function(e){return e[1]}))]})).map((function(e){var t,a=Object(C.a)(e,2),n=a[0],r=a[1];return[r.length>1?function(e){var t=e.type;return r.includes(t)}:(t=r[0],function(e){return e.type===t}),n]})).map((function(e){var t=Object(C.a)(e,2),a=t[0],n=t[1];switch(n){case"select":case"radio":return[function(e,t){return e.enum&&a(e,t)},n];default:return[a,n]}})).value();function dt(e){var t=e.node.schema,a=e.updateSchema,n="type",i=["string","number","integer","boolean"];if(!i.includes(t.type))return[];var c=(t||{})[n];return[null,r.a.createElement(it,{key:n,title:"Type",remove:function(){return a(Object(qe.a)({},n,void 0))}},r.a.createElement(Je.a,{onChange:function(e){return a(Object(qe.a)({},n,e))},value:c,style:{width:"100%"}},i.map((function(e){return r.a.createElement(rt,{key:e},e)}))))]}function mt(e){var t=e.node.schema,a=e.updateSchema,n="title",i=(t||{})[n];return void 0===i?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,""))}},"Title")]:[null,r.a.createElement(ot,{key:n,title:"Title",value:i,onChange:function(e){return a(Object(qe.a)({},n,e||void 0))}})]}function pt(e){var t=e.node.schema,a=e.updateSchema,n="description",i=(t||{})[n];return void 0===i?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,""))}},"Description")]:[null,r.a.createElement(lt,{key:n,title:"Description",value:i,onChange:function(e){return a(Object(qe.a)({},n,e||void 0))},autoSize:!0})]}var ht=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).colSizes=["sm","md","lg","xl"],n.style={width:"100%"},n.onSliderChange=function(e){var t=n.state,a=t.value,r=t.col,i=!1,c=a.map((function(t){var a=t.split("-"),n=Object(C.a)(a,3),c=n[0],o=n[1],l=n[2];return"col"===c&&o===r&&Number.isInteger(+l)?(i=!0,e?"col-".concat(o,"-").concat(e):""):t})).filter((function(e){return e}));!i&&e&&c.push("col-".concat(r,"-").concat(e)),n.props.onChange(c.join(" "))};var r=Object(Ce.a)(new Set(n.props.value.split(" ").filter((function(e){return e})))),i=n.extractCol(r);return n.state={col:i.length?i[0][0]:"md",value:r,options:r},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(e.value!==this.props.value){var t=e.value.split(" ").filter((function(e){return e})),a=this.state.options,n=t.filter((function(e){return!a.includes(e)}));this.setState({value:t,options:n})}}},{key:"extractCol",value:function(e){var t=this;return e.filter((function(e){return e.startsWith("col-")})).map((function(e){return e.split("-")})).filter((function(e){return 3===e.length&&Number.isInteger(+e[2])&&t.colSizes.includes(e[1])})).map((function(e){var t=Object(C.a)(e,3);t[0];return[t[1],+t[2]]}))}},{key:"renderMenu",value:function(){var e=this;return r.a.createElement(Ie.a,{onClick:function(t){var a=t.key;return e.setState({col:a})}},this.colSizes.map((function(e){return r.a.createElement(Ie.a.Item,{key:e},"col-",e,"-")})))}},{key:"sliderValue",value:function(){var e=this.state,t=e.value,a=e.col;return(this.extractCol(t).find((function(e){return e[0]===a}))||[0,0])[1]}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=Object(W.a)(t,["title"]),i=this.state,c=i.options,o=i.value,l=i.col;return r.a.createElement(it,{title:a,remove:function(){return e.props.onChange(void 0)}},r.a.createElement(Ye.a,{type:"flex",align:"middle"},r.a.createElement(ze.a,{xs:4},r.a.createElement(xe.a,{overlay:this.renderMenu()},r.a.createElement(k.a,{type:"link"},l," ",r.a.createElement(Xe.a,null)))),r.a.createElement(ze.a,{xs:20},r.a.createElement(Ge.a,{min:0,max:12,value:this.sliderValue(),onChange:this.onSliderChange}))),r.a.createElement(Je.a,Object.assign({style:this.style,mode:"tags",tokenSeparators:[" "]},n,{value:o,onChange:function(t){return e.props.onChange(t.join(" "))},onBlur:this.onBlur}),c.map((function(e){return r.a.createElement(rt,{key:e},e)}))))}}]),a}(r.a.Component);function ft(e){var t=e.node.uiSchema,a=e.updateUiSchema,n="classNames",i=(t||{})[n];return void 0===i?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,""))}},"Class Names")]:[null,r.a.createElement(ht,{key:n,title:"Class Names",value:i,onChange:function(e){return a({classNames:e})}})]}function vt(e){var t=e.node,a=t.schema,n=t.uiSchema,i=e.updateUiOptions;if("object"===a.type||"array"===a.type)return[];var c="placeholder",o=((n||{})["ui:options"]||{})[c];return void 0===o?[r.a.createElement(Ie.a.Item,{key:c,onClick:function(){return i(Object(qe.a)({},c,""))}},"Placeholder")]:[null,r.a.createElement(ot,{key:c,title:"Placeholder",value:o,onChange:function(e){return i(Object(qe.a)({},c,e))}})]}function yt(e){var t=e.node.uiSchema,a=e.updateUiSchema,n="ui:help",i=(t||{})[n];return void 0===i?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,""))}},"Help")]:[null,r.a.createElement(ot,{key:n,title:"Help",value:i,onChange:function(e){return a(Object(qe.a)({},n,e))}})]}function gt(e){var t=e.node,a=t.schema,n=t.uiSchema,i=e.updateUiSchema,c="ui:widget",o=st.filter((function(e){return(0,Object(C.a)(e,1)[0])(a||{},n||{})}));if(!o.length)return[];var l=(n||{})[c];return void 0===l?[r.a.createElement(Ie.a.Item,{key:c,onClick:function(){return i(Object(qe.a)({},c,""))}},"Widget")]:[null,r.a.createElement(it,{key:c,title:"Widget",remove:function(){return i(Object(qe.a)({},c,void 0))}},r.a.createElement(Je.a,{onChange:function(e){return i(Object(qe.a)({},c,e||null))},value:l,style:{width:"100%"},showSearch:!0},o.map((function(e){var t=Object(C.a)(e,2),a=(t[0],t[1]);return r.a.createElement(rt,{key:a},a)}))))]}function bt(e){var t=e.node.schema,a=e.updateSchema;if("string"!==t.type)return[];var n="pattern",i=(t||{})[n];return void 0===i?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,""))}},"Pattern")]:[null,r.a.createElement(ot,{key:n,title:"Pattern",value:i,onChange:function(e){return a(Object(qe.a)({},n,e||void 0))}})]}function Et(e){var t=e.node.schema,a=e.updateSchema,n="required";return"object"!==t.type?[]:t.required?[null,r.a.createElement(it,{key:n,title:"Required",remove:function(){return a(Object(qe.a)({},n,void 0))}},r.a.createElement(Je.a,{mode:"multiple",style:{width:"100%"},onChange:function(e){return a({required:e})},value:t.required},Object.keys(t.properties||{}).map((function(e){return r.a.createElement(rt,{key:e},e)}))))]:[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,[]))}},"Required")]}var Ot=function(e,t,a,n,i){return function(c){var o=c.node.schema,l=c.updateSchema;return e(o)?void 0===o[n]&&void 0===o[i]?[r.a.createElement(Ie.a.Item,{key:t,onClick:function(){return l(Object(qe.a)({},n,0))}},a)]:[null,r.a.createElement(ut,{key:t,title:a,value:[o[n],o[i]],onChange:function(e){if(e){var t,a=Object(C.a)(e,2),r=a[0],c=a[1];l((t={},Object(qe.a)(t,n,r||(void 0===c?0:void 0)),Object(qe.a)(t,i,c),t))}else{var o;l((o={},Object(qe.a)(o,n,void 0),Object(qe.a)(o,i,void 0),o))}}})]:[]}},jt=Ot((function(e){return"string"===e.type}),"length","Length","minLength","maxLength"),kt=Ot((function(e){return"number"===e.type||"integer"===e.type}),"range","Range","minimum","maximum"),St=Ot((function(e){return"array"===e.type}),"itemRange","Item Range","minItems","maxItems");function Ct(e){var t=e.node.schema,a=e.updateSchema,n="uniqueItems";return"array"!==t.type?[]:void 0===t[n]?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,!0))}},"Unique Items")]:[null,r.a.createElement(He.b.Item,{actions:[r.a.createElement(k.a,{onClick:function(){return a(Object(qe.a)({},n,void 0))},size:"small",type:"danger",icon:r.a.createElement(Ze.a,null)})]},r.a.createElement(He.b.Item.Meta,{title:"Unique Items"}),r.a.createElement(Qe.a,{defaultChecked:!0,onChange:function(e){return a(Object(qe.a)({},n,e))}}))]}var Tt=[["enum","Enum"],["enumNames","Enum Names"]].map((function(e){var t=Object(C.a)(e,2),a=t[0],n=t[1];return function(e){var t=e.node.schema,i=e.updateSchema;return"string"!==t.type?[]:void 0===t[a]?[r.a.createElement(Ie.a.Item,{key:a,onClick:function(){return i(Object(qe.a)({},a,[]))}},n)]:[null,r.a.createElement(it,{key:a,title:n,remove:function(){return i(Object(qe.a)({},a,void 0))}},r.a.createElement(Je.a,{mode:"tags",style:{width:"100%"},onChange:function(e){return i(Object(qe.a)({},a,e))},value:t[a]},t[a].map((function(e){return r.a.createElement(Je.a.Option,{key:e},e)}))))]}})),_t=Object(C.a)(Tt,2),wt=_t[0],Nt=_t[1],xt=["date-time","email","hostname","ipv4","ipv6","uri"];function It(e){var t=e.node.schema,a=e.updateSchema,n="format";return"string"!==t.type?[]:void 0===t[n]?[r.a.createElement(Ie.a.Item,{key:n,onClick:function(){return a(Object(qe.a)({},n,[]))}},"Format")]:[null,r.a.createElement(it,{key:n,title:"Format",remove:function(){return a(Object(qe.a)({},n,void 0))}},r.a.createElement(Je.a,{style:{width:"100%"},onChange:function(e){return a(Object(qe.a)({},n,e))},value:t[n]},xt.map((function(e){return r.a.createElement(rt,{key:e},e)}))))]}var Dt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"name",value:function(){return null}},{key:"render",value:function(){var e=this,t=[dt,mt,pt,Et,gt,ft,yt,vt,wt,Nt,bt,jt,kt,St,Ct,It].map((function(t){return t(e.props)})),a=t.map((function(e){return e[0]})).filter((function(e){return e})),n=t.map((function(e){return e[1]})).filter((function(e){return e}));return a.length&&n.push(r.a.createElement(He.b.Item,{key:"addButton"},r.a.createElement(xe.a,{trigger:["click"],overlay:r.a.createElement(Ie.a,null,a)},r.a.createElement(k.a,{style:{width:"100%"},type:"primary",icon:r.a.createElement(et.a,null)})))),r.a.createElement(He.b,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){return e}})}},{key:"_render",value:function(){return r.a.createElement("form",{className:"ant-form ant-form-horizontal"},this.name(),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Schema"),this.title(),this.description()),r.a.createElement("fieldset",null,r.a.createElement("legend",null,"uiSchema"),this.widgets(),this.classNames(),this.help()))}}],[{key:"filter",value:function(e){return e.schema}},{key:"key",get:function(){return"basic-editor"}},{key:"name",get:function(){return"Basic"}}]),a}(r.a.Component),Rt=a(89).getNode,At=ke.a.TabPane,Ft=[Dt,Le],Mt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).updateUiOptions=function(t){var a=e.props.node,n=a.uiSchema,r=void 0===n?{}:n,i=a.key,c=r["ui:options"]||{},o=Object(p.a)(Object(p.a)({},c),t);for(var l in o)if(void 0!==o[l])return void e.props.updateNode(i,{uiSchema:Object(p.a)(Object(p.a)({},r),{},{"ui:options":Object(p.a)(Object(p.a)({},c),o)})});e.props.updateNode(i,{uiSchema:Object(p.a)(Object(p.a)({},r),{},{"ui:options":void 0})})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.node,n=t.updateNode;if(!a||!a.schema)return null;var i=Ft.filter((function(e){return e.filter(a)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{defaultActiveKey:i[0].key,type:"card"},i.map((function(t){return r.a.createElement(At,{tab:t.name,key:t.key},r.a.createElement("div",{style:{margin:"0px 16px"}},r.a.createElement(t,{key:a.key,node:a,updateNode:function(e){return n(a.key,e)},updateSchema:function(e){return n(a.key,{schema:Object(p.a)(Object(p.a)({},a.schema),e)})},updateUiSchema:function(e){return n(a.key,{uiSchema:Object(p.a)(Object(p.a)({},a.uiSchema),e)})},updateUiOptions:e.updateUiOptions})))}))),r.a.createElement("p",null,"Click on the selected form in the left sidebar to push this drawer in."))}}]),a}(r.a.Component),Pt=Object(E.b)((function(e){var t=e.tree.present,a=e.activeNodeKey;return{node:a&&Rt(t,a)}}),(function(e){return{updateNode:function(t,a){return e({type:"TREE_UPDATE_NODE",payload:{target:t,nodeUpdate:a}})}}}))(Mt),Vt=a(893),Wt=a(894),Ut=a(895),Bt=a(896),Kt=a(160),Lt=a.n(Kt),qt=(a(842),{marginLeft:8}),Jt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).newTemplate=function(){n.setState({templateId:null})},n.save=Object(v.a)(f.a.mark((function e(){var t,a,r,i,c,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.tree.present[0],a=t.name,r=t.schema,i=t.uiSchema,c={name:a,category_id:n.state.categoryId,formSchema:JSON.stringify(r),uiSchema:void 0!==i?JSON.stringify(i):""},e.prev=2,console.log(c),null!==n.state.templateId){e.next=10;break}return e.next=7,b.post("/templates",c);case 7:o=e.sent,e.next=13;break;case 10:return e.next=12,b.patch("/templates",Object(p.a)(Object(p.a)({},c),{},{id:n.state.templateId}));case 12:o=e.sent;case 13:201===(l=o.status)?j.a.open({message:"Template Created",description:"Your new template was added to the database."}):200===l&&j.a.open({message:"Template Update",description:"Your new template was updated in the database."}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),j.a.open({message:"Sorry, Template could not be created.",description:"There was some error in the backend"});case 21:case"end":return e.stop()}}),e,null,[[2,17]])}))),n.showTemplates=Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/categories");case 2:t=e.sent,a=(a=t.data).filter((function(e){return null!==e&&null!==e.template_id})),n.setState({visible:!0,categories:a});case 6:case"end":return e.stop()}}),e)}))),n.handleOk=function(e){n.setState({visible:!1})},n.renderThisTemplate=function(){var e=Object(v.a)(f.a.mark((function e(t){var a,r,i,c,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.templates.filter((function(e){return e._id===t})),r=Object(C.a)(a,1),i=r[0],c=JSON.parse(i.formSchema),o={},l=i.name,""!==i.uiSchema&&(o=JSON.parse(i.uiSchema)),n.props.setTree({name:l,schema:c,uiSchema:o}),n.setState({visible:!1,existingTemplate:!0,templateId:i._id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={visible:!1,templates:[],categories:[],templateId:null,categoryId:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,r,i,c,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/templates");case 2:if(t=e.sent,a=t.data,n={categoryId:this.props.category,templateId:this.props.template},this.setState(Object(p.a)({templates:a},n)),null===n.templateId){e.next=10;break}this.renderThisTemplate(n.templateId),e.next=18;break;case 10:return r={type:"object",properties:{name:{type:"string",title:"Name"},image:{type:"string",title:"Image"},description:{type:"string",title:"Description"},price:{type:"string",title:"Price"}}},i={},e.next=13,b.get("/categories/"+this.state.categoryId);case 13:c=e.sent,o=c.data,console.log(o),l="".concat(o.name,"-template"),this.props.setTree({name:l,schema:r,uiSchema:i});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.tree,n=t.undo,i=t.redo,c=a.past,o=a.future;return r.a.createElement("span",null,r.a.createElement(te.a,{title:"Open"},r.a.createElement(k.a,{style:qt,onClick:function(){return e.showTemplates()},icon:r.a.createElement(Vt.a,null)},"Open")),r.a.createElement(te.a,{title:"Save"},r.a.createElement(k.a,{style:qt,onClick:function(){T.a.confirm({title:"Confirm",content:"Are you sure you want to ".concat(null===e.state.templateId?"save":"update"," this Template?"),okText:"OK",cancelText:"Cancel",onOk:function(){return e.save()}})},icon:r.a.createElement(Wt.a,null)},null===this.state.templateId?"Save":"Update")),r.a.createElement(te.a,{title:"Undo"},r.a.createElement(k.a,{style:qt,onClick:n,disabled:!c.length,icon:r.a.createElement(Ut.a,null)},"Undo")),r.a.createElement(te.a,{title:"Redo"},r.a.createElement(k.a,{style:qt,onClick:i,disabled:!o.length,icon:r.a.createElement(Bt.a,null)},"Redo")),r.a.createElement(T.a,{title:"View Existing Templates by Category",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleOk,footer:[r.a.createElement(k.a,{key:"back",onClick:this.handleOk},"Okay")]},r.a.createElement(He.b,{bordered:!0,dataSource:this.state.categories,renderItem:function(t){return r.a.createElement(He.b.Item,{className:"template-list",onClick:function(){return e.renderThisTemplate(t.template_id)}},t.name)}})))}}]),a}(r.a.Component),Yt=Object(E.b)((function(e){return{tree:e.tree,settings:e.settings}}),(function(e){return{newForm:function(){return e({type:"TREE_CLEAR"})},setTree:function(t){return e({type:"TREE_SET_TREE",payload:t})},undo:function(){return e({type:Kt.ActionTypes.UNDO})},redo:function(){return e({type:Kt.ActionTypes.REDO})},updateSettings:function(t){return e({type:"SETTINGS_UPDATE",payload:{subViews:t}})}}}))(Jt),zt=T.a.confirm,Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return(e=!e)?t:window.innerWidth-t}}(),$t=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"siderWidth",value:function(){var e=this,t=this.props.settings,a=t.leftSiderWidth,n=t.rightSiderWidth;return{key:"sider-width",title:"Sider Width",description:r.a.createElement(Ge.a,{included:!0,min:0,max:window.innerWidth,tipFormatter:Ht,range:!0,value:[a,window.innerWidth-n],onChange:function(t){var a=Object(C.a)(t,2),n=a[0],r=a[1];e.props.updateSettings({leftSiderWidth:n>200?n:200,rightSiderWidth:window.innerWidth-r})}})}}},{key:"formWidth",value:function(){var e=this;return{key:"form-item",title:"Form Width",description:r.a.createElement(Ge.a,{min:0,max:window.innerWidth,value:this.props.settings.formWidth,onChange:function(t){e.props.updateSettings({formWidth:t})}})}}},{key:"inlineMode",value:function(){var e=this;return{key:"inline-mode",title:"Inline Mode",actions:[r.a.createElement(Qe.a,{onChange:function(t){return e.props.updateSettings({isInlineMode:t})},checked:this.props.settings.isInlineMode})]}}},{key:"liveValidate",value:function(){var e=this;return{key:"live-validate",title:"Live Validate",actions:[r.a.createElement(Qe.a,{onChange:function(t){return e.props.updateSettings({isLiveValidate:t})},checked:this.props.settings.isLiveValidate})]}}},{key:"menu",value:function(){var e=this.props,t=e.setTree,a=e.rootNode,n=e.setMenu,i=e.menu;return{key:"menu",title:"Menu",description:[r.a.createElement(k.a,{key:"edit",onClick:function(){return t(i)}},"Customize"),r.a.createElement(k.a,{key:"set",onClick:function(){return n(a)}},"Apply Change")]}}},{key:"reset",value:function(){return{key:"reset",description:r.a.createElement(k.a,{type:"danger",sytle:{width:"100%"},key:"edit",onClick:function(){zt({title:"Reset Form Buiilder?",content:"Removing persistent data from local storage.\n All settings and unsaved form will be lost.",okText:"Continue",okType:"danger",closable:!0,maskClosable:!0,onOk:function(){window.localStorage.removeItem("persist:react-jsonschema-formbuilder"),window.location.reload()}})}},"Reset Form Builder")}}},{key:"listItems",value:function(){return[this.siderWidth(),this.formWidth(),this.inlineMode(),this.liveValidate(),this.menu(),this.reset()]}},{key:"renderItem",value:function(e){var t=He.b.Item,a=He.b.Item.Meta;return r.a.createElement(t,{key:e.key,actions:e.actions},r.a.createElement(a,{title:e.title,description:e.description}))}},{key:"render",value:function(){return r.a.createElement(He.b,{itemLayout:"horizontal",dataSource:this.listItems(),renderItem:this.renderItem})}}]),a}(r.a.Component),Gt=Object(E.b)((function(e){return{settings:e.settings,rootNode:Object(C.a)(e.tree.present,1)[0],menu:e.menu}}),(function(e){return{updateSettings:function(t){return e({type:"SETTINGS_UPDATE",payload:t})},setTree:function(t){var a=t.schema,n=t.uiSchema;return e({type:"TREE_SET_TREE",payload:{name:"menu",schema:a,uiSchema:n}})},setMenu:function(t){var a=t.schema,n=t.uiSchema;return e({type:"MENU_SET",payload:{schema:a,uiSchema:n}})}}}))($t),Qt=je.a.Header,Zt=je.a.Sider,Xt=je.a.Content,ea=ke.a.TabPane,ta=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!1,categoryId:null,templateId:null},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.props.setFormData({formData:{}}),this.props.defaultMenu()}},{key:"componentDidMount",value:function(){this.props.updateSettings({isInlineMode:!0});var e=new URLSearchParams(this.props.location.search),t=e.get("category"),a=e.get("template");this.setState({categoryId:t,templateId:a})}},{key:"render",value:function(){var e=this.props.settings;return r.a.createElement(je.a,null,r.a.createElement(Zt,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,width:e.leftSiderWidth,style:{background:"#fff",padding:0,overflow:"auto",boxShadow:"0 2px 3px 0 rgba(0, 0, 0, 0.2), 0 2px 3px 0 rgba(0, 0, 0, 0.2)",height:"100vh",position:"fixed",left:0}},r.a.createElement(ke.a,{defaultActiveKey:"0",size:"small",type:"card"},r.a.createElement(ea,{tab:"Editor",style:{padding:"8px"},key:"0"},r.a.createElement(Ke,null)),r.a.createElement(ea,{tab:"Settings",style:{padding:"8px"},key:"1"},r.a.createElement(Gt,null)))),r.a.createElement(je.a,{style:{marginLeft:e.leftSiderWidth}},r.a.createElement(Qt,{style:{background:"#fff",padding:0}},r.a.createElement(Yt,{category:this.state.categoryId,template:this.state.templateId})),r.a.createElement(Xt,{style:{minHeight:280,padding:"12px 8px"}},r.a.createElement(Se.a,{bordered:!1,style:{width:e.formWidth,margin:"12px 8px",display:"inline-block",verticalAlign:"top"}},r.a.createElement(ve,null)))),r.a.createElement(Zt,{width:this.props.activeNodeKey?e.rightSiderWidth:0,style:{overflow:"auto",background:"#fff",boxShadow:"0 2px 3px 0 rgba(0, 0, 0, 0.2), 0 2px 3px 0 rgba(0, 0, 0, 0.2)",position:"fixed",height:"100vh",right:0}},r.a.createElement(Pt,null)))}}]),a}(n.Component),aa=Object(E.b)((function(e){return{activeNodeKey:e.activeNodeKey,settings:e.settings}}),(function(e){return{setFormData:function(t){var a=t.formData;return e({type:"FORM_DATA_SET",payload:a})},updateSettings:function(t){return e({type:"SETTINGS_UPDATE",payload:t})},defaultMenu:function(){return e({type:"MENU_DEFAULT",payload:{}})}}}))(ta),na=a(870),ra=(a(843),function(){var e=Object(n.useState)(),t=Object(C.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(),o=Object(C.a)(c,2),l=o[0],u=o[1],s=Object(n.useState)(!0),d=Object(C.a)(s,2),m=d[0],p=d[1];return Object(n.useEffect)((function(){Object(v.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("/templates");case 3:t=e.sent,a=(a=(a=t.data).filter((function(e){return null!==e.category_id}))).map((function(e){return{name:e.name,category:e.category_id.name,key:e._id,category_id:e.category_id._id}})),i(a),u([{title:"Template Name",dataIndex:"name",key:"name"},{title:"Category",dataIndex:"category",key:"category"},{title:"View/Edit",key:"view/edit",fixed:"right",render:function(e){return r.a.createElement(k.a,{href:"/template?category=".concat(e.category_id,"&template=").concat(e.key)},"View/Edit")}}]),p(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),j.a.error({message:"An Error Occurred",description:"There was an error while displaying products."});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),r.a.createElement("div",{className:"container main-container"},r.a.createElement("h3",null,"Listing all Templates"),!0===m?r.a.createElement(S.a,{active:!0}):r.a.createElement(na.a,{dataSource:a,columns:l}))}),ia=a(884),ca=a(276),oa=(a(850),function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={templateId:null,categoryId:null,dataFetching:!0,products:{data:[],names:[]},columns:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,n,i,c,o,l,u,s,d,m=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=new URLSearchParams(this.props.location.search),a=t.get("category"),n=[],null===a){e.next=14;break}return this.setState({categoryId:a}),e.next=8,b.get("/product/category/"+a);case 8:i=e.sent,c=i.data,0!==(n=c).length&&this.setState({templateId:n[0].template}),e.next=20;break;case 14:return e.next=16,b.get("/product/");case 16:o=e.sent,l=o.data,console.log(l),n=l;case 20:n=n.filter((function(e){return"{}"!==e.data})),u=n.map((function(e){return JSON.parse(e.data)})),s=n.map((function(e){void 0===e.name&&(e.name="--Not defined--");var t=e.meta.update;return{name:e.name,image:e.image,description:e.description,price:e.price,data:JSON.parse(e.data),created_at:e.meta.created_at,updated_at:t.length>0?t.slice(t.length-1)[0].updated_at:"-",template:e.template,category:e.category,id:e._id,key:e._id}})),(d=[{title:"Name",dataIndex:"name",key:"name",filters:s.map((function(e){return{text:e.name,value:e.name}}))},{title:"Created At",dataIndex:"created_at",key:"created_at",defaultSortOrder:"descend",sorter:function(e,t){return new Date(e.created_at)-new Date(t.created_at)}},{title:"Update At",dataIndex:"updated_at",key:"updated_at",sorter:function(e,t){return new Date(e.updated_at)-new Date(t.updated_at)}}]).push({title:"Add a product using existing product",key:"name",width:200,render:function(e){return r.a.createElement(k.a,{onClick:function(){var t=Object(v.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.props.setFormData({formData:e.data});case 2:"object"===typeof t.sent&&setTimeout((function(){var t="addproduct?category=".concat(e.category._id,"&template=").concat(e.template._id);window.location.href=t}),1e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Make a Copy")}},{title:"Make changes to existing product",key:"name",width:200,render:function(e){return r.a.createElement(k.a,{onClick:function(){var t=Object(v.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.props.setFormData({formData:e.data});case 2:"object"===typeof t.sent&&setTimeout((function(){var t="addproduct?category=".concat(e.category._id,"&template=").concat(e.template._id,"&product=").concat(e.id);window.location.href=t}),1e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Edit")}},{title:"Delete Product",key:"name",fixed:"right",width:100,render:function(e){return r.a.createElement(k.a,{onClick:function(){var t=Object(v.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.delete("/product/".concat(e.category._id,"/").concat(e.id));case 2:204===t.sent.status?j.a.success({message:"Product Deleted",description:"This product was deleted from the database."}):j.a.error({message:"An Error Occurred",description:"There was an error while deleting this product."});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"Remove Product")}}),this.setState({products:{data:u,names:s},columns:d,dataFetching:!1}),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0),j.a.error({message:"An Error Occurred",description:"There was an error while displaying products."});case 32:case"end":return e.stop()}}),e,this,[[0,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container main-container"},r.a.createElement("h3",null,this.state.templateId?"Listing Products based on Template":"Listing all Products"),r.a.createElement("div",{style:{display:"flex"}},this.state.dataFetching?r.a.createElement(ia.b,{size:"middle"},r.a.createElement(ca.a,null)):r.a.createElement(na.a,{dataSource:this.state.products.names,columns:this.state.columns})),this.state.categoryId&&this.state.templateId?r.a.createElement(k.a,{style:{marginLeft:"45%"},href:"/addproduct?template=".concat(this.state.templateId,"&category=").concat(this.state.categoryId)},"Add Product"):null)}}]),a}(n.Component)),la=Object(E.b)((function(e){return{formData:e.formData}}),(function(e){return{setFormData:function(t){var a=t.formData;return e({type:"FORM_DATA_SET",payload:a})}}}))(oa),ua=a(102),sa=a(89),da=a(493),ma=a.n(da),pa=a(345),ha=a.n(pa),fa=a(494),va=a.n(fa),ya=Object(sa.schema2node)(["menu"],ha.a.schema,ha.a.uiSchema),ga=Object(sa.schema2tree)("root",{type:"object",properties:{accuracy:{type:"string",title:"Accuracy"},limit:{type:"string",title:"Limit"}}});var ba=Object(ua.b)({tree:function(e){return function(t,a){var n=e(t,a);return delete n.history,n}}(Lt()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TREE_CLEAR":return ga;case"TREE_SET_TREE":var a=t.payload,n=a.name,r=a.schema,i=a.uiSchema;return Object(sa.schema2tree)(n||e[0]&&e[0].name||"root",r||e[0].schema,i||e[0].uiSchema);case"TREE_ADD_NODE":var c=t.payload,o=c.targetNodeKey,l=c.position,u=c.node2add;return Object(sa.addNode)(e,o,l,u);case"TREE_REMOVE_NODE":var s=Object(sa.removeNode)(e,t.payload);return s.length?s:ga;case"TREE_MOVE_NODE":var d=t.payload,m=d.source,p=d.target,h=d.position;return Object(sa.moveNode)(e,m,p,h);case"TREE_UPDATE_NODE":var f=t.payload,v=f.target,y=f.nodeUpdate,g=Object(sa.updateNode)(e,v,y);return g;default:return e}}),{filter:Object(Kt.includeAction)(["TREE_UPDATE_NODE","TREE_SET_TREE","TREE_CLEAR","TREE_ADD_NODE","TREE_REMOVE_NODE","TREE_MOVE_NODE"])})),activeNodeKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTIVE_NODE_KEY_SET":return t.payload||null;case"TREE_UPDATE_NODE":var a=t.payload,n=a.target,r=a.nodeUpdate;if(e===n&&r.name){var i=e.split(".");if(i[i.length-1]!==r.name)return i.slice(0,-1).join(".")+"."+r.name}return e;case"TREE_SET_TREE":case"TREE_CLEAR":return null;default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma.a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS_UPDATE":return Object.assign({},e,t.payload);default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_SET":var a=t.payload,n=a.schema,r=a.uiSchema;return Object(sa.schema2node)(["menu"],n,r);case"MENU_DEFAULT":return ya;default:return e}},formData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORM_DATA_SET":return t.payload;default:return e}},menuOpenKeys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_OPEN_KEYS_SET":return t.payload;default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va.a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OPTIONS":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}}}),Ea=a(349),Oa=a(495),ja=a.n(Oa),ka=a(496),Sa=a.n(ka),Ca={key:"react-jsonschema-formbuilder",storage:ja.a,stateReconciler:Sa.a,throttle:15},Ta=(0,a(89).schema2tree)("root",{title:"Template Form",description:"A simple form example.",type:"object",required:["name","image"],properties:{name:{type:"string",title:"Product Name"},image:{type:"string",title:"Image Link"},price:{type:"integer",title:"Price"},description:{type:"string",title:"Description"}}},{name:{"ui:emptyValue":""},image:{"ui:emptyvalue":""},price:{"ui:emptyvalue":""},description:{"ui:emptyvalue":""},date:{"ui:widget":"alt-datetime"}}),_a=Object(Ea.a)(Ca,(function(e,t){switch(t.type){case"TREE_REMOVE_NODE_BY_RJSF_ID":var a=Object(sa.getNodeByRjsfId)(e.tree.present,t.payload);if(!a)return e;t={type:"TREE_REMOVE_NODE",payload:a.key};break;case"ACTIVE_NODE_KEY_SET_BY_RJSF_ID":var n=Object(sa.getNodeByRjsfId)(e.tree.present,t.payload);if(!n)return e;t={type:"ACTIVE_NODE_KEY_SET",payload:n.key};break;case"TREE_UPDATE_NODE_BY_RJSF_ID":var r=t.payload.rjsfId,i=Object(sa.getNodeByRjsfId)(e.tree.present,r);if(!i)return e;t={type:"TREE_UPDATE_NODE",payload:Object(p.a)(Object(p.a)({},t.payload),{},{target:i.key})}}return ba(e,t)})),wa=Object(ua.c)(_a,{tree:{past:[],present:Ta,future:[]}}),Na=Object(Ea.b)(wa),xa=a(497),Ia=a(897),Da=a(898),Ra=a(899),Aa=je.a.Content,Fa=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleClick=function(e){console.log("click ",e),n.setState({current:e.key})},n.state={current:"category"},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e,t=window.location.pathname,a=t.indexOf("/",1)>0?t.indexOf("/",1)+1:-1;e="viewtemplates"===(e="addproduct"===(e=""===(e=-1===a?t.slice(1):t.slice(1,a))?"category":e)?"product":e)?"template":e,this.setState({current:e})}},{key:"render",value:function(){var e=this.state.current;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(Ie.a,{theme:"dark",onClick:this.handleClick,selectedKeys:[e],mode:"horizontal"},r.a.createElement(Ie.a.Item,{key:"category",icon:r.a.createElement(Ia.a,null)},r.a.createElement(d.b,{to:"/category"},"Categories")),r.a.createElement(Ie.a.Item,{key:"template",icon:r.a.createElement(Da.a,null)},r.a.createElement(d.b,{to:"/viewtemplates"},"Product Templates")),r.a.createElement(Ie.a.Item,{key:"product",icon:r.a.createElement(Ra.a,null)},r.a.createElement(d.b,{to:"/product"},"Products"))),r.a.createElement(je.a,null,r.a.createElement(Aa,null,r.a.createElement(m.a,{path:["/category","/"],exact:!0},r.a.createElement(F,null)),r.a.createElement(m.a,{path:"/template",component:aa}),r.a.createElement(m.a,{path:"/viewtemplates",component:ra}),r.a.createElement(m.a,{path:"/product",component:la}),r.a.createElement(m.a,{path:"/addproduct/",component:Oe})))))}}]),a}(n.Component),Ma=Object(E.b)((function(e){return{activeNodeKey:e.activeNodeKey,settings:e.settings}}))(Fa),Pa=function(){return r.a.createElement(E.a,{store:wa},r.a.createElement(xa.a,{loading:null,persistor:Na},r.a.createElement(Ma,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Pa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,a){"use strict";a.r(t),a.d(t,"schema2tree",(function(){return s})),a.d(t,"removeNodeByPath",(function(){return j})),a.d(t,"addNodeByPath",(function(){return C})),a.d(t,"moveNodeByPath",(function(){return w})),a.d(t,"updateNodeByPath",(function(){return I})),a.d(t,"getNode",(function(){return f})),a.d(t,"removeNode",(function(){return k})),a.d(t,"addNode",(function(){return T})),a.d(t,"moveNode",(function(){return N})),a.d(t,"updateNode",(function(){return D})),a.d(t,"schema2node",(function(){return p})),a.d(t,"getNodeByRjsfId",(function(){return R}));var n=a(165),r=a(19),i=a(104),c=a(69),o=a(351);function l(e){if(!e)return!0;for(var t in e)if(void 0!==e[t])return!1;return!0}function u(e){return e.isLeaf}function s(e,t,a){return[p([e],t,a)]}var d,m=(d="__".concat(Date.now(),"__"),function(e){d in e?delete e[d]:e[d]=void 0});try{0}catch(A){}function p(e,t,a){if(!t)return null;var n=e.join("."),r=e[e.length-1];if("object"===t.type){var i=[];for(var o in t.properties){var l=p([].concat(Object(c.a)(e),[o]),t.properties[o],a&&a[o]);l&&i.push(l)}return{key:n,name:r,schema:t,uiSchema:a,children:i}}if("array"===t.type){var u;if(Array.isArray(t.items)){var s=[].concat(Object(c.a)(e),["[items]"]);if(u=[{key:n+".[items]",name:"[items]",children:t.items.map((function(e,n){return p([].concat(Object(c.a)(s),[n.toString()]),t.items[n],a&&a.items&&a.items[n])}))}],"additionalItems"in t){var d=[].concat(Object(c.a)(e),["additionalItems"]);u.push(p(d,t.additionalItems,a&&a.additionalItems))}}else u=[p([].concat(Object(c.a)(e),["items"]),t.items,a&&a.items)];return{key:n,name:r,schema:t,uiSchema:a,children:u}}return{key:n,name:r,schema:t,uiSchema:a,isLeaf:!0}}function h(e,t){var a,n,r=e,c=Object(i.a)(t);try{var o=function(){var e=n.value;if(!(a=r.find((function(t){return t.name===e}))))return{v:null};r=a.children};for(c.s();!(n=c.n()).done;){var l=o();if("object"===typeof l)return l.v}}catch(u){c.e(u)}finally{c.f()}return a}function f(e,t){return h(e,t.split("."))}function v(e,t){return e.map((function(e){var a=t+"."+e.name;return Object.assign({},e,{key:t+"."+e.name},e.children&&{children:v(e.children,a)})}))}function y(e){return e.key.substring(0,e.key.length-e.name.length-1)}function g(e,t,a){a||(a=e.name),t||(t=y(e));var n=t?t+"."+a:a;return e.key===n?e:(e.schema.title=a[0].toUpperCase()+a.slice(1,a.length),Object.assign({},e,{name:a,key:n},e.children&&{children:v(e.children,n)}))}function b(e,t){if(!e.schema)return Object(r.a)(Object(r.a)({},e),{},{children:t});var a=function(e,t){var a=Object.assign({},e.schema);if("object"===e.schema.type){var n,r={},c=Object(i.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;r[o.name]=o.schema}}catch(d){c.e(d)}finally{c.f()}a.properties=r}else if("array"===e.schema.type)if(Array.isArray(e.schema.items)){a=Object.assign({},e.schema);var l=t.find((function(e){return"[items]"===e.name}));if(l!==e.children.find((function(e){return"[items]"===e.name})))l?a.items=l.children.map((function(e){return e.schema})):delete a.items;else{var u=t.find((function(e){return"additionalItems"===e.name}));u?a.additionalItems=u.schema:delete a.additionalItems}}else{var s=t.find((function(e){return"items"===e.name}));s?a.items=s.schema:delete a.items}return a}(e,t),n=function(e,t){var a={};for(var n in e.uiSchema)(n.startsWith("ui:")||"classNames"===n)&&(a[n]=e.uiSchema[n]);if("object"===e.schema.type){var r,c=Object(i.a)(t);try{for(c.s();!(r=c.n()).done;){var o=r.value;o.uiSchema&&(a[o.name]=o.uiSchema)}}catch(d){c.e(d)}finally{c.f()}}else if("array"===e.schema.type)if(Array.isArray(e.schema.items)){var l=t.find((function(e){return"[items]"===e.name}));if(l!==e.children.find((function(e){return"[items]"===e.name}))){if(l){var u=!0;a.items=l.children.map((function(e){return u=u&&!e.uiSchema,e.uiSchema||null})),u&&delete a.items}"additionalItems"in e.uiSchema&&(a.additionalItems=e.uiSchema.additionalItems)}else{"items"in e.uiSchema&&(a.items=e.uiSchema.items),t.find((function(e){return"additionalItems"===e.name}))&&(a.additionalItems=l.children.map((function(e){return e.schema})))}}else{var s=t.find((function(e){return"items"===e.name}));s&&s.uiSchema&&(a.items=s.uiSchema)}return a}(e,t),c=Object.assign({},e,{schema:a,uiSchema:n,children:t});return l(n)&&delete c.uiSchema,c}function E(e){return e.map((function(e,t){return e.name===t.toString()?e:g(e,null,t.toString())}))}function O(e,t){var a=Object(n.a)(t),r=a[0],c=a.slice(1),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!r&&0!==r)return e;var l=!1,u=[];if(!c.length){var s=e.filter((function(e){return e.name!==r}));return 2===o&&(s=E(s)),s.length===e.length?e:s}var d,m=Object(i.a)(e);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(p.name===r){o=p.schema&&"array"===p.schema.type&&Array.isArray(p.schema.items)?1:1===o&&"[items]"===r?2:0;var h=O(p.children,c,o);if(h===p.children)return e;l=!0;var f=b(p,h),v=null;if(1===c.length&&(v=f.schema)&&v.required){var y=v.required.filter((function(e){return e!==c[0]}));y.length!==v.required.length&&(f.schema=Object.assign({},v,{required:y.length?y:void 0}))}u.push(f)}else u.push(p)}}catch(g){m.e(g)}finally{m.f()}return l?u:e}function j(e,t){return O(e,t)}function k(e,t){return t==="".concat(e[0].key,".name")||t==="".concat(e[0].key,".image")?(o.a.error({message:"Cannot delete basic fields!",description:"You cannot delete the basic fields required for templates."}),e):O(e,t.split("."))}function S(e,t,a,r){var o=Object(n.a)(t),l=o[0],s=o.slice(1),d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!l&&0!==l)return e;var m=!1,p=[];if(!s.length){e=e||[];var h=!1;for(var f in e){var v=e[f];if(v.name===l){if(h=!0,a<0){if(!d&&e.find((function(e){return e.name===r.name})))return e;p.push(g(r,y(v)))}if(0===a){if(u(v))return e;if(!d&&v.children.find((function(e){return e.name===r.name})))return e;var O=[].concat(Object(c.a)(v.children||[]),[g(r,v.key)]);1===d&&(O=E(O)),p.push(b(v,O))}else p.push(v);if(a>0){if(!d&&e.find((function(e){return e.name===r.name})))return e;p.push(g(r,y(v)))}}else p.push(v)}return h?2===d?E(p):p:e}var j,k=Object(i.a)(e);try{for(k.s();!(j=k.n()).done;){var C=j.value;if(C.name===l){d=C.schema&&"array"===C.schema.type&&Array.isArray(C.schema.items)?1:1===d&&"[items]"===l?2:0,console.log(d);var T=S(C.children,s,a,r,d);if(T===C.children)return e;m=!0,p.push(b(C,T))}else p.push(C)}}catch(_){k.e(_)}finally{k.f()}return m?p:e}function C(e,t,a,r){var i=Object(n.a)(t),o=i[0],l=i.slice(1);return S(e,[o].concat(Object(c.a)(l)),a,r)}function T(e,t,a,n){return S(e,t.split("."),a,n)}function _(e,t,a,r){var o=Object(n.a)(t),l=o[0],s=o.slice(1),d=Object(n.a)(a),p=d[0],f=d.slice(1),v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!l)return e;if(l===p&&f.length){var y,j=[],k=!1,C=Object(i.a)(e);try{for(C.s();!(y=C.n()).done;){var T=y.value;if(T.name===l){if(u(T))return e;v=T.schema&&"array"===T.schema.type&&Array.isArray(T.schema.items)?1:1===v&&"[items]"===l?2:0;var w=_(T.children,s,f,r,v);if(w===T.children)return e;if(k=!0,1===f.length&&1===s.length&&T.schema&&"object"===T.schema.type){var N,x={},I=Object(i.a)(w);try{for(I.s();!(N=I.n()).done;){var D=N.value;x[D.name]=D.schema}}catch(L){I.e(L)}finally{I.f()}var R=Object.assign({},T.schema,{properties:x});m(R),j.push(Object.assign({},T,{schema:R,children:w}))}else j.push(b(T,w))}else j.push(T)}}catch(L){C.e(L)}finally{C.f()}return k?j:e}if(!s.length&&!f.length){var A=[],F=!1,M=e.find((function(e){return e.name===l}));if(!M)return e;for(var P in e){var V=e[P];if(V.name!==l)if(V.name===p){if(F=!0,r<0&&A.push(M),0===r){if(u(V))return e;var W=[].concat(Object(c.a)(V.children||[]),[g(M,V.key)]);1===v&&(W=E(W)),A.push(b(V,W))}else A.push(V);r>0&&A.push(M)}else A.push(V)}return 2===v&&(A=E(A)),F?A:e}var U=h(e,[l].concat(Object(c.a)(s)));if(!U)return e;var B=O(e,[l].concat(Object(c.a)(s)),v),K=S(B,[p].concat(Object(c.a)(f)),r,U,v);return K===B?e:K}function w(e,t,a,n){return _(e,t,a,n)}function N(e,t,a,n){return _(e,t.split("."),a.split("."),n)}var x=["string","number","integer","boolean"];function I(e,t,a){return function e(t,a,r){var c,o=Object(n.a)(a),u=o[0],s=o.slice(1),d=[],m=!1,p=Object(i.a)(t);try{for(p.s();!(c=p.n()).done;){var h=c.value;if(h.name===u){var f=Object.assign({},h);if(s.length){if(!h.children)return t;var v=e(h.children,s,r);if(v===h.children)return t;m=!0;var y=b(h,v),E=null;1===s.length&&r.name&&(E=y.schema)&&E.required&&E.required.includes(s[0])&&(y.schema=Object.assign({},E,{required:E.required.map((function(e){return e===s[0]?r.name:e}))})),d.push(y)}else{var O=function(){var e=r.schema,a=r.uiSchema,n=r.name,i=Object.assign({},r);delete i.schema,delete i.uiSchema,delete i.name,delete i.children,delete i.key,f=Object.assign(f,i);var c=!1;if(e){m=!0;var o=h.schema,u=Object.assign({},e);if(u.type){if(u.type!==o.type){if(!x.includes(u.type)||!x.includes(o.type))return{v:t};for(var s in c=!0,u)["type","title","description"].includes(s)||delete u[s]}}else u.type=o.type;"object"===u.type&&(u.properties=o.properties),"array"===u.type&&(u.items=o.items,u.additionalItems=o.items),f.schema=u}if(a){m=!0;var p=h.uiSchema,v={};for(var y in a)(y.startsWith("ui:")||"classNames"===y)&&(v[y]=a[y]);for(var b in c&&delete v["ui:widget"],h.uiSchema)b.startsWith("ui:")||"classNames"===b||(v[b]=p[b]);l(v)?delete f.uiSchema:f.uiSchema=v}if(n&&n!==f.name){if(t.find((function(e){return e.name===n})))return{v:t};m=!0,f=g(f,null,n)}d.push(f)}();if("object"===typeof O)return O.v}}else d.push(h)}}catch(j){p.e(j)}finally{p.f()}return m?d:t}(e,t,a)}function D(e,t,a){return I(e,t.split("."),a)}function R(e,t){var a,n=Object(i.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r&&r.name===t)return r;if(t.startsWith(r.name)&&"_"===t[r.name.length]){if("array"===r.schema.type){var c=function(){var e=(t=t.slice(r.name.length+1)).indexOf("_"),a=e>0?t.slice(0,e):t;if(isNaN(a))return{v:null};var n=e>0?t.slice(e+1):null;if(Array.isArray(r.schema.items)){if(+a<r.schema.items.length){var i=r.children.find((function(e){return"[items]"===e.name}));return i=i&&i.children.find((function(e){return e.name===a})),{v:n?i&&R(i.children,t.slice(e+1)):i}}var c=r.children.find((function(e){return"additionalItems"===e.name}));return{v:n?c&&R(c.children,n):c}}var o=r.children.find((function(e){return"items"===e.name}));return{v:n?o&&R(o.children,t.slice(e+1)):o}}();if("object"===typeof c)return c.v}if(r.children){t=t.slice(r.name.length+1);var o=R(r.children,t);if(o)return o}}}}catch(l){n.e(l)}finally{n.f()}return null}t.default={schema2tree:s,removeNodeByPath:j,addNodeByPath:C,moveNodeByPath:w,updateNodeByPath:I,getNode:f,removeNode:k,addNode:T,moveNode:N,updateNode:D,schema2node:p,getNodeByRjsfId:R}}},[[505,1,2]]]);
//# sourceMappingURL=main.8754ccb4.chunk.js.map